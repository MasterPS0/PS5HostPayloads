<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>PS5 UMTX2 Payload UI</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<!-- exploit / core logic -->
<script src="main.js"></script>

<style>
  body {
    margin: 0;
    padding: 0;
    background: url("img/xmb.png") no-repeat center center fixed;
    background-size: cover;
    font-family: system-ui, -apple-system, Arial, sans-serif;
    color: #fff;
    text-align: center;
  }

  .container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 20px 10px 40px;
  }

  h1 {
    margin: 10px 0 5px;
    font-size: 26px;
  }

  .subtitle {
    color: #ccc;
    font-size: 14px;
    margin-bottom: 10px;
  }

  .logo img {
    width: 128px;
    height: auto;
  }

  /* Tabs */
  .tabs {
    display: flex;
    justify-content: center;
    margin: 20px 0 10px;
    border-bottom: 2px solid rgba(255,255,255,0.15);
  }

  .tab {
    padding: 10px 25px;
    cursor: pointer;
    font-size: 18px;
    font-weight: 600;
    color: #bbb;
    border-bottom: 3px solid transparent;
    transition: 0.25s;
  }

  .tab.active {
    color: #fff;
    border-bottom-color: #1e90ff;
  }

  .section {
    display: none;
  }
  .section.active {
    display: block;
  }

  /* Grid of payload cards */
  .grid {
    display: grid;
    grid-template-columns: repeat(4, minmax(0, 1fr));
    gap: 12px;
    margin-top: 15px;
  }

  .payload-card {
    background: rgba(0,0,0,0.75);
    border-radius: 14px;
    padding: 8px;
    box-shadow: 0 0 15px rgba(0,0,0,0.7);
  }

  .payload-card img {
    width: 100%;
    border-radius: 10px;
    margin-bottom: 8px;
  }

  .payload-card-title {
    font-size: 16px;
    font-weight: 600;
    margin-bottom: 6px;
  }

  .payload-card button {
    width: 100%;
    padding: 7px 4px;
    border: none;
    border-radius: 8px;
    background: #1e90ff;
    color: #fff;
    font-weight: 600;
    font-size: 14px;
    cursor: pointer;
  }

  .payload-card button:active {
    transform: scale(0.97);
  }

  #status {
    margin-top: 20px;
    background: rgba(0,0,0,0.65);
    border-radius: 10px;
    padding: 10px;
    min-height: 32px;
    font-size: 14px;
  }

  @media (max-width: 950px) {
    .grid { grid-template-columns: repeat(2, minmax(0,1fr)); }
  }
</style>
</head>
<body>
<div class="container">

  <h1>PS5 UMTX2 Payloads</h1>
  <div class="logo">
    <img src="img/PS_Loaders.png" alt="PS5 Loaders">
  </div>
  <div class="subtitle">
    Run exploit first, then choose any payload below (internal UMTX2 sender, port 9021).
  </div>

  <!-- TABS -->
  <div class="tabs">
    <div class="tab active" onclick="switchTab(1)">Payloads</div>
    <div class="tab" onclick="switchTab(2)">Themes</div>
    <div class="tab" onclick="switchTab(3)">HomeBrew</div>
  </div>

  <!-- SECTION 1: PAYLOADS -->
  <div id="section1" class="section active">
    <div class="grid">

      <div class="payload-card">
        <img src="img/youtube_block_v1.4.png" alt="YT block 1.4">
        <div class="payload-card-title">YT Block v1.4</div>
        <button onclick="runPayload('ytb14')">Run</button>
      </div>

      <div class="payload-card">
        <img src="img/youtube_block.png" alt="YT block 1.3">
        <div class="payload-card-title">YT Block v1.3</div>
        <button onclick="runPayload('ytb13')">Run</button>
      </div>

      <div class="payload-card">
        <img src="img/ftpsrv1.4.png" alt="ftpsrv">
        <div class="payload-card-title">FTPSRV v1.4</div>
        <button onclick="runPayload('ftpsrv')">Run</button>
      </div>

      <div class="payload-card">
        <img src="img/online_json.png" alt="Online ID">
        <div class="payload-card-title">Online ID</div>
        <button onclick="runPayload('onlineid')">Run</button>
      </div>

      <div class="payload-card">
        <img src="img/backup_download0.png" alt="Backup">
        <div class="payload-card-title">Backup download0</div>
        <button onclick="runPayload('backup')">Run</button>
      </div>

      <div class="payload-card">
        <img src="img/restore_download0.png" alt="Restore">
        <div class="payload-card-title">Restore download0</div>
        <button onclick="runPayload('restore')">Run</button>
      </div>

      <div class="payload-card">
        <img src="img/ps5debug_v1.0b5.png" alt="PS5Debug">
        <div class="payload-card-title">PS5Debug v1.0b5</div>
        <button onclick="runPayload('ps5debug')">Run</button>
      </div>

    </div>
  </div>

  <!-- SECTION 2: THEMES -->
  <div id="section2" class="section">
    <div class="grid">

      <div class="payload-card">
        <img src="img/ghost-of-yotei.png" alt="Ghost Theme">
        <div class="payload-card-title">Ghost of Yotei Theme</div>
        <button onclick="runPayload('themes_ps')">Run</button>
      </div>

      <div class="payload-card">
        <img src="img/Apps_logos.png" alt="Apps Logos">
        <div class="payload-card-title">Apps Logos</div>
        <button onclick="runPayload('apps_logos')">Run</button>
      </div>

      <div class="payload-card">
        <img src="img/replace_icon.png" alt="Replace Icon">
        <div class="payload-card-title">Replace Icon</div>
        <button onclick="runPayload('replace_icon')">Run</button>
      </div>

    </div>
  </div>

  <!-- SECTION 3: HOMEBREW / TOOLS -->
  <div id="section3" class="section">
    <div class="grid">

      <div class="payload-card">
        <img src="img/websrv-ps5.png" alt="websrv-ps5">
        <div class="payload-card-title">websrv-ps5</div>
        <button onclick="runPayload('websrv')">Run</button>
      </div>

    </div>
  </div>

  <div id="status">Ready… (wait exploit to finish, then choose any payload)</div>

</div>

<script>
  // خريطة الحمولات -> معلومات UMTX2
  const PAYLOADS = {
    // كلها تُرسل إلى elfldr على 9021 داخل UMTX2 (send_buffer_to_port)
    ytb14: {
      filename: "yt_blocker1.4.elf",
      displayTitle: "YT Block v1.4",
      toPort: 9021
    },
    ytb13: {
      filename: "yt_blocker1.3.elf",
      displayTitle: "YT Block v1.3",
      toPort: 9021
    },
    ftpsrv: {
      filename: "ftpsrv-ps5.elf",
      displayTitle: "FTPSRV v1.4",
      toPort: 9021
    },
    onlineid: {
      filename: "online_json.elf",
      displayTitle: "Online ID",
      toPort: 9021
    },
    backup: {
      filename: "backup_download0.elf",
      displayTitle: "Backup download0",
      toPort: 9021
    },
    restore: {
      filename: "restore_download0.elf",
      displayTitle: "Restore download0",
      toPort: 9021
    },
    ps5debug: {
      filename: "ps5debug_v1.0b5.elf",
      displayTitle: "PS5Debug v1.0b5",
      toPort: 9021
    },
    themes_ps: {
      filename: "themes_ps.elf",
      displayTitle: "Ghost Theme",
      toPort: 9021
    },
    apps_logos: {
      filename: "Apps_logos.elf",
      displayTitle: "Apps Logos",
      toPort: 9021
    },
    replace_icon: {
      filename: "replace_icon.elf",
      displayTitle: "Replace Icon",
      toPort: 9021
    },
    websrv: {
      filename: "websrv-ps5.elf",
      displayTitle: "websrv-ps5",
      toPort: 9021
    }
  };

  function switchTab(n) {
    document.querySelectorAll(".tab").forEach(t => t.classList.remove("active"));
    document.querySelectorAll(".section").forEach(s => s.classList.remove("active"));
    document.querySelectorAll(".tab")[n-1].classList.add("active");
    document.getElementById("section" + n).classList.add("active");
  }

  function setStatus(msg, color) {
    const s = document.getElementById("status");
    s.textContent = msg;
    s.style.color = color || "#fff";
  }

  function runPayload(key) {
    const info = PAYLOADS[key];
    if (!info) {
      setStatus("Payload not found in map: " + key, "red");
      return;
    }

    if (typeof window.MAINLOOP_EXECUTE_PAYLOAD_REQUEST !== "function") {
      setStatus("Exploit is not ready yet. Run UMTX2 jailbreak first.", "red");
      return;
    }

    setStatus("Loading & sending: " + info.displayTitle + " …", "#ffd966");

    try {
      // هذه الدالة موجودة داخل main.js وتنفّذ نفس طريقة UMTX2 الأصلية
      window.MAINLOOP_EXECUTE_PAYLOAD_REQUEST({
        filename: info.filename,
        displayTitle: info.displayTitle,
        toPort: info.toPort
      });
    } catch (e) {
      setStatus("Error calling MAINLOOP_EXECUTE_PAYLOAD_REQUEST: " + e.message, "red");
    }
  }
</script>

</body>
</html>
